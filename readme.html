<!-- File: readme.html
  Copyright (c) 2022 Splunk Inc.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
either express or implied. See the License for the specific language governing permissions
and limitations under the License.
-->
<h3>
  Expressions in DynamoDB
</h3>
<p>
  AWS DynamoDBuse uses expressions to denote the attributes that you want to read from an item. It also uses expressions
  when writing an item to indicate any conditions that must be met, and to indicate how the attributes are
  to be updated. Expressions are an integral part of using DynamoDB, and they are used in a few different ways:
</p>
<ul>
  <li>Condition Expressions</li>
  <li>Update Expressions</li>
  <li>Key Condition Expressions</li>
  <li>Filter Expressions</li>
  <li>Projection Expressions</li>
</ul>
<br>

<div>
  <h4>
    Condition Expressions
  </h4>
  <p>
    To manipulate data in an AWS DynamoDB table, we use the Put Item, Update Item, and Delete Item operatios.
    For these data manipulation operations, we can specify a condition expression to determine which items should be
    modified. If the condition expression evaluates to true, the operation succeeds; otherwise, the operation fails.
  </p>
  <h4>
    Update Expressions
  </h4>
  <p>
    To update an existing item in an AWS DynamoDB table, we use the Update Item operation. We must provide the key of
    the item that we want to update. We must also provide an update expression, indicating the attributes that you want
    to modify and the values that you want to assign to them. There are 4 operations update expression suppports :
  <ul>
    <li>
      <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.UpdateExpressions.html#Expressions.UpdateExpressions.SET"
        target="_blank">SET</a>—modifying
      or adding item attributes
    </li>
    <li>
      <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.UpdateExpressions.html#Expressions.UpdateExpressions.REMOVE"
        target="_blank">REMOVE</a>—deleting
      attributes from an item
    </li>
    <li>
      <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.UpdateExpressions.html#Expressions.UpdateExpressions.ADD"
        target="_blank">ADD</a>
      —updating numbers and sets
    </li>
    <li>
      <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.UpdateExpressions.html#Expressions.UpdateExpressions.DELETE"
        target="_blank">DELETE</a>
      —removing elements from a set
    </li>
  </ul>
  </p>
  <h4>
    Key Condition Expressions
  </h4>
  <p>
    They are used when querying a table with a composite primary key to limit the items selected.
  </p>
  <h4>
    Filter Expressions
  </h4>
  <p>
    They allow you to filter the results of queries and scans to allow for more efficient responses.
  </p>
  <h4>
    Projection Expressions
  </h4>
  <p>
    They are used to specify a subset of attributes you want to receive when reading Items. We used these in our GetItem
    calls in the previous lesson.
  </p>
</div>
<br>
<div>The following actions uses expressions</div>


<table>
  <tr>
    <th>Expression Name</th>
    <th>Action Name</th>
  </tr>
  <tr>
    <td>Condition Expression</td>
    <td>
      <ul>
        <li>Delete Item</li>
        <li>Put Item</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>Update Expression</td>
    <td>
      <ul>
        <li>Update Item</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>Key Condition Expression</td>
    <td>
      <ul>
        <li>Query Data</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>Filter Expression</td>
    <td>
      <ul>
        <li>Query Data</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>Projection Expression</td>
    <td>
      <ul>
        <li>Query Data</li>
      </ul>
    </td>
  </tr>
</table>

<h4>Expression attribute names and values</h4>
<p>
  While using this app certain actions will ask for <strong>expression attribute names</strong> and <strong>expression
    attributevalues</strong> which would be neccessay while using expressions. This values are neccessay to pass for the
  following conditions:
</p>
<ul>
  <li>To access an attribute whose name conflicts with a DynamoDB
    <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/ReservedWords.html"
      target="_blank">reserved words</a>.
  </li>
  <li>To create a placeholder for repeating occurrences of an attribute name in an expression.</li>
  <li>To prevent special characters in an attribute name from being misinterpreted in an expression.</li>
</ul>
<br>
<div>
  <h4>To write the expression attribute data reffer the code snippets given below</h4>
  <div>
    <p><strong>Expression Attribite Names Example</strong></p>
    <pre>
        {
          "#name":"name"
          "#age" : "age"
        }
    </pre>
  </div>
  <br>
  <div>
    <p><strong>Expression Attribite Values Example</strong></p>
    <pre>
        {
          ":name": {
              "S":"Jhon Doe"
          },
          ":age":{
              "N":"22"
          }
        }
    </pre>
  </div>
</div>
<div>
  <p><strong>Local Secondary Index</strong></p>
  <p>
    To create a local secondary index(LSI), sort key becomes necessary. The partition key remains the same
    as that of the table If you want to make single local secondary index takes, just pass a JSON object
    with the attributes given below and for multiple local secondary indexes pass an array of JSON
    objects.(Can only create 5 LSI at max)
  </p>
  <ul>
    <li>
      <p>Key name: <strong>sort_key_name</strong></p>
      <p>Description: Name of the local secondary sort key</p>
      <p>Required: True</p>
      <p>Input Type: String</p>
    </li>
    <li>
      <p>Key name: <strong>sort_key_datatype</strong></p>
      <p>Description: Datatype for the local secondary sort key (accepts only 3 types of values as valid,
        that are <strong>String, Number or Binary</strong>)</p>
      <p>Required: True</p>
      <p>Input Type: String</p>
    </li>
    <li>
      <p>Key name: <strong>attribute_projection</strong></p>
      <p>Description: Type of attribute projection. There are the following types of projections</p>
      <ul>
        <li>
          KEYS_ONLY: Only the index and primary keys are projected into the index.
        </li>
        <li>
          INCLUDE: Only the specified table attributes are projected into the index. The list of
          projected attributes is in NonKeyAttributes .

        </li>
        <li>
          ALL: All of the table attributes are projected into the index.
        </li>
      </ul>
      <p>Required: True</p>
      <p>Input Type: String</p>
    </li>
    <li>
      <p>Key name: <strong>non_key_attributes</strong></p>
      <p>
        Description: A list of one or more non-key attribute names that are projected into the secondary
        index. (Required only when the projection mode is set to INCLUDE)
      </p>
      <p>Required: False</p>
      <p>Input Type: Array of string values</p>
    </li>
  </ul>
  <div>
    <p>VALUE EXAMPLE</p>
    <ul>
      <li>
        <p>Single JSON object for LSI</p>
        <pre>
            {
              "sort_key_name": "lsi_one",
              "sort_key_datatype": "String",
              "attribute_projection": "INCLUDE",
              "non_key_attributes": [
                  "one",
                  "two",
                  "three"
              ]
            }
        </pre>
      </li>
      <li>
        <p>Multiple JSON object for LSI</p>
        <pre>
            [
              {
                  "sort_key_name": "lsi_one",
                  "sort_key_datatype": "String",
                  "attribute_projection": "INCLUDE",
                  "non_key_attributes": [
                      "one",
                      "two",
                      "three"
                  ]
              },
              {
                  "sort_key_name": "lsi_two",
                  "sort_key_datatype": "String",
                  "attribute_projection": "ALL",
              }
            ]
        </pre>
      </li>
    </ul>
  </div>
</div>
<div>
  <p><strong>Global Secondary Index</strong></p>
  <p>
    To create a global secondary index(GSI), partition key becomes necessary. Sort key is optional. the
    parameters for Global Secondary Indexes remain the same as Local Secondary Index, just Partition key
    name and Partition key name datatype are added and they become required parameters. Whereas Sort key
    name and Sort key datatype become optional. The provisional read and write capacity units are the same
    as the original table.(Can only create 20 GSI at max)
  </p>
  <ul>
    <li>
      <p>Key name: <strong>partition_key_name</strong></p>
      <p>Description: Name of the local secondary sort key</p>
      <p>Required: True</p>
      <p>Input Type: String</p>
    </li>
    <li>
      <p>Key name: <strong>partiton_key_datatype</strong></p>
      <p>Description: Datatype for the local secondary sort key (accepts only 3 types of values as valid,
        that are <strong>String, Number or Binary</strong>)</p>
      <p>Required: True</p>
      <p>Input Type: String</p>
    </li>
    <li>
      <p>Key name: <strong>sort_key_name</strong></p>
      <p>Description: Name of the global secondary sort key (required parameter)</p>
      <p>Required: False</p>
      <p>Input Type: String</p>
    </li>
    <li>
      <p>Key name: <strong>sort_key_datatype</strong></p>
      <p>Description: Datatype for the global secondary sort key (accepts only 3 types of values as valid,
        that are <strong>String, Number or Binary</strong>)</p>
      <p>Required: False</p>
      <p>Input Type: String</p>
    </li>
    <li>
      <p>Key name: <strong>attribute_projection</strong></p>
      <p>Description: Type of attribute projection. There are the following types of projections</p>
      <ul>
        <li>
          KEYS_ONLY: Only the index and primary keys are projected into the index.
        </li>
        <li>
          INCLUDE: Only the specified table attributes are projected into the index. The list of
          projected attributes is in NonKeyAttributes .

        </li>
        <li>
          ALL: All of the table attributes are projected into the index.
        </li>
      </ul>
      <p>Required: True</p>
      <p>Input Type: String</p>

    </li>
    <li>
      <p>Key name: <strong>non_key_attributes</strong></p>
      <p>
        Description: A list of one or more non-key attribute names that are projected into the secondary
        index. (Required only when the projection mode is set to INCLUDE)
      </p>
      <p>Required: False</p>
      <p>Input Type: Array of string values</p>
    </li>
  </ul>
  <div>
    <p>VALUE EXAMPLE</p>
    <ul>
      <li>
        <p>Single JSON object for GSI</p>
        <pre>
            {
              "partition_key_name": "gsi_id",
              "partition_key_datatype": "Number",
              "sort_key_name": "gsi_one",
              "sort_key_datatype": "String",
              "attribute_projection": "INCLUDE",
              "non_key_attributes": [
                  "one",
                  "two",
                  "three"
              ]
            }
        </pre>
      </li>
      <li>
        <p>Multiple JSON object for GSI</p>
        <pre>
            [
              {
                  "partition_key_name": "gsi_id",
                  "partition_key_datatype": "Number",
                  "sort_key_name": "gsi_one",
                  "sort_key_datatype": "String",
                  "attribute_projection": "INCLUDE",
                  "non_key_attributes": [
                      "one",
                      "two",
                      "three"
                  ]
              },
              {
                  "partition_key_name": "gsi_name",
                  "partition_key_datatype": "String",
                  "attribute_projection": "ALL",
              }
            ]
        </pre>
      </li>
    </ul>
  </div>
</div>




<!-- <ul>
  <li>
    This action is used to create a table on DynamoDB
  </li>
  <li>
    Each table has a Primary Key to identify items uniquely. The primary in DynamoDB is made up of Partition Key
    and Sort Key. Sort is Optional, but once the table is created you cannot add/update Sort Key
  </li>
  <li>The date types that can be used for keys are:</li>
  <ul>
    <li>String</li>
    <li>Number</li>
    <li>Binary</li>
  </ul>
  <li>
    The Billing mode defines how you going to be charged for read and write throughput and how you manage capacity.
    This setting can be changed later. By default the value for Billing Mode is PROVISIONED.
    <ul>
      <li>
        PROVISIONED
        We recommend using PROVISIONED for predictable workloads. PROVISIONED sets the billing mode to
        Provisioned Mode.
      </li>
      <li>
        PAY_PER_REQUEST
        We recommend using PAY_PER_REQUEST for unpredictable workloads. PAY_PER_REQUEST set the
        billing mode to On-Demand Mode.
      </li>
    </ul>
  </li>
  <li>
    The Read/Write Capacity values by default are 5 units and auto scaling is disable.
  </li>
  <li>
    Secondary Indexes
    <ul>
      <li>
        For creating Local Secondary Index (LSI) and Global Secondary Index (GSI), please refer the documentation
        above.
      </li>
      <li>
        Once created local secondary index cannot be added/updated, but Global Secondary can be created.
      </li>
    </ul>

  </li>

  <li>
    A DynamoDB stream is an ordered flow of information about changes to items in a DynamoDB table. When you enable
    a stream on a table, DynamoDB captures information about every modification to data items in the table. To
    enable streams for table, check the enable stream checkbox and select the stream view type from Dropdown.
    <ul>
      <li>
        KEYS_ONLY - Only the key attributes of the modified item are written to the stream.
      </li>
      <li>
        NEW_IMAGE - The entire item, as it appears after it was modified, is written to the stream.
      </li>
      <li>
        OLD_IMAGE - The entire item, as it appeared before it was modified, is written to the stream.
      </li>
      <li>
        NEW_AND_OLD_IMAGES - Both the new and the old item images of the item are written to the stream.
      </li>
    </ul>
  </li>
  <li>
    SSE
    <ul>
      <li>
        Set it to true to use server-side encryption.
      </li>
      <li>
        For the KMS master key id provide the KMS key value that should be used for encryption.
      </li>
    </ul>
  </li>
</ul> -->
